local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Aimbot", "DarkTheme")
local Tab = Window:NewTab("Main")
local Section = Tab:NewSection("Controls")

local lockEnabled = false
local connection

-- ฟังก์ชันค้นหาผู้เล่นที่อยู่ใกล้ที่สุดและไม่อยู่ทีมเดียวกัน
local function getNearestPlayer(excludeTeam)
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return nil end

    local closestPlayer = nil
    local closestDistance = math.huge
    
    for _, otherPlayer in pairs(game.Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("Head") then
            if excludeTeam == false or player.Team ~= otherPlayer.Team then
                local distance = (character.HumanoidRootPart.Position - otherPlayer.Character.HumanoidRootPart.Position).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = otherPlayer
                end
            end
        end
    end
    return closestPlayer
end

-- ฟังก์ชันล็อกกล้องไปที่ผู้เล่นที่ใกล้ที่สุด
local function lockOnTarget(excludeTeam)
    if connection then connection:Disconnect() end

    local runService = game:GetService("RunService")
    connection = runService.RenderStepped:Connect(function()
        if not lockEnabled then
            connection:Disconnect()
            return
        end

        local player = game.Players.LocalPlayer
        local character = player.Character
        if not character then return end

        local targetPlayer = getNearestPlayer(excludeTeam)
        if targetPlayer and targetPlayer.Character then
            local targetHead = targetPlayer.Character:FindFirstChild("Head")
            if targetHead and targetPlayer.Character:FindFirstChild("Humanoid").Health > 0 then
                workspace.CurrentCamera.CFrame = CFrame.lookAt(workspace.CurrentCamera.CFrame.Position, targetHead.Position)
            end
        end
    end)
end

Section:NewToggle("Aimbot 100% (Team)", "Locks camera to nearest enemy", function(state)
    lockEnabled = state
    if state then
        lockOnTarget(true)
    else
        if connection then connection:Disconnect() end
    end
end)

Section:NewToggle("Aimbot 100% (Normal)", "Locks camera to nearest player (including teammates)", function(state)
    lockEnabled = state
    if state then
        lockOnTarget(false)
    else
        if connection then connection:Disconnect() end
    end
end)

-- ฟังก์ชันเปิดใช้งาน ESP (Wallhack)
local function toggleESP(state)
    local function createESP(player)
        if player.Character then
            local character = player.Character
            if state and not character:FindFirstChild("ESPBox") then
                local newHighlight = Instance.new("Highlight")
                newHighlight.Parent = character
                newHighlight.FillColor = Color3.fromRGB(255, 0, 0) -- สีแดง
                newHighlight.OutlineColor = Color3.fromRGB(255, 255, 255) -- สีขาว
                newHighlight.FillTransparency = 0.5
                newHighlight.OutlineTransparency = 0
                newHighlight.Name = "ESPBox"
            elseif not state and character:FindFirstChild("ESPBox") then
                character:FindFirstChild("ESPBox"):Destroy()
            end
        end
    end

    local function onCharacterAdded(character)
        wait(0.5) 
        createESP(game.Players:GetPlayerFromCharacter(character))
    end

    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Character then
            createESP(player)
        end
        player.CharacterAdded:Connect(onCharacterAdded)
    end

    game.Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(onCharacterAdded)
    end)
end

Section:NewToggle("Wallhack (ESP)", "See all players through walls", function(state)
    toggleESP(state)
end)

-- เพิ่มสไลเดอร์เพื่อปรับความเร็ว
Section:NewSlider("WalkSpeed", "Adjusts your walk speed", 500, 16, function(s)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = s
end)

local noclipXEnabled = false
local runService = game:GetService("RunService")

-- ฟังก์ชันเปิด/ปิดตัวทะลุในแกน X
local function toggleNoclipX(state)
    noclipXEnabled = state
    if state then
        runService.Stepped:Connect(function()
            if noclipXEnabled then
                local character = game.Players.LocalPlayer.Character
                if character then
                    for _, part in pairs(character:GetChildren()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
            end
        end)
    else
        local character = game.Players.LocalPlayer.Character
        if character then
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

Section:NewToggle("Wall Clip (X-axis)", "Enable/Disable passing through walls on X-axis", function(state)
    toggleNoclipX(state)
end)
